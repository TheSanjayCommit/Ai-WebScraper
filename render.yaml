  # Backend Service (Native Node with Chrome)
  - type: web
    name: ai-web-scraper-backend
    env: node
    plan: free
    buildCommand: cd server && chmod +x render-build.sh && ./render-build.sh
    startCommand: cd server && node index.js
    envVars:
      - key: PUPPETEER_SKIP_CHROMIUM_DOWNLOAD
        value: true
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/google-chrome-stable
    autoDeploy: false

  # Frontend Static Site
  - type: static
    name: ai-web-scraper-frontend
    buildCommand: cd client && npm install && npm run build
    staticPublishPath: client/dist
    envVars:
      - key: VITE_API_URL
        fromService:
          type: web
          name: ai-web-scraper-backend
          property: url
